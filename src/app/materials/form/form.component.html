<h1>{{ isEditMode ? 'Editar Material' : 'Crear Material' }}</h1>

<form [formGroup]="materialForm" (ngSubmit)="onSubmit()" class="form-grid">

    <mat-form-field appearance="fill" class="form-field">
        <mat-label>Nombre</mat-label>
        <input matInput formControlName="nombre" placeholder="Ingresa el nombre" />
        <mat-error *ngIf="materialForm.get('nombre')?.invalid && materialForm.get('nombre')?.touched">
            El nombre es obligatorio.
        </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="form-field">
        <mat-label>Descripción</mat-label>
        <textarea matInput formControlName="descripcion" placeholder="Ingresa la descripción"></textarea>
        <mat-error *ngIf="materialForm.get('descripcion')?.invalid && materialForm.get('descripcion')?.touched">
            La descripción es obligatoria.
        </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="form-field">
        <mat-label>Precio</mat-label>
        <input matInput type="number" formControlName="precio" placeholder="Ingresa el precio" />
        <mat-error *ngIf="materialForm.get('precio')?.invalid && materialForm.get('precio')?.touched">
            El precio debe ser mayor a 0.
        </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="form-field">
        <mat-label>Tipo</mat-label>
        <input matInput formControlName="tipo" placeholder="Ingresa el tipo" />
        <mat-error *ngIf="materialForm.get('tipo')?.invalid && materialForm.get('tipo')?.touched">
            El tipo es obligatorio.
        </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="form-field">
        <mat-label>Fecha de Compra</mat-label>
        <input matInput [matDatepicker]="compraPicker" formControlName="fecha_compra" />
        <mat-datepicker-toggle matSuffix [for]="compraPicker"></mat-datepicker-toggle>
        <mat-datepicker #compraPicker></mat-datepicker>
        <mat-error *ngIf="materialForm.get('fecha_compra')?.invalid && materialForm.get('fecha_compra')?.touched">
            La fecha de compra es obligatoria.
        </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="form-field">
        <mat-label>Fecha de Venta</mat-label>
        <input matInput [matDatepicker]="ventaPicker" formControlName="fecha_venta" />
        <mat-datepicker-toggle matSuffix [for]="ventaPicker"></mat-datepicker-toggle>
        <mat-datepicker #ventaPicker></mat-datepicker>
    </mat-form-field>

    <mat-form-field appearance="fill" class="form-field">
        <mat-label>Estado</mat-label>
        <mat-select formControlName="estado">
            <mat-option *ngFor="let estado of estados" [value]="estado">{{ estado }}</mat-option>
        </mat-select>
        <mat-error *ngIf="materialForm.get('estado')?.invalid && materialForm.get('estado')?.touched">
            El estado es obligatorio.
        </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="form-field">
        <mat-label>Ciudad</mat-label>
        <mat-select formControlName="ciudad_id">
            <mat-option *ngFor="let ciudad of ciudades" [value]="ciudad.id">{{ ciudad.nombre }}</mat-option>
        </mat-select>
        <mat-error *ngIf="materialForm.get('ciudad_id')?.invalid && materialForm.get('ciudad_id')?.touched">
            La ciudad es obligatoria.
        </mat-error>
    </mat-form-field>

    <div class="form-buttons">
        <button mat-raised-button color="primary" type="submit" [disabled]="materialForm.invalid">
            {{ isEditMode ? 'Actualizar' : 'Crear' }}
        </button>
        <button mat-button color="warn" routerLink="/materials">Cancelar</button>
    </div>
</form>